CREATE OR REPLACE TABLE TPCDI_ODS.PUBLIC.ACCOUNT_ODS
(
   CA_ID INT NOT NULL COMMENT 'CUSTOMER ACCOUNT IDENTIFIER'
 , CA_B_ID INT COMMENT 'IDENTIFIER OF THE MANAGING BROKER'
 , CA_C_ID INT NOT NULL COMMENT 'OWNING CUSTOMER IDENTIFIER'
 , CA_NAME CHAR(50) COMMENT 'NAME OF CUSTOMER ACCOUNT'
 , CA_TAX_ST INT COMMENT '0, 1 OR 2 TAX STATUS OF THIS ACCOUNT'
 , CA_ST_ID CHAR(4) COMMENT 'ACTV OR INAC CUSTOMER STATUS TYPE IDENTIFIER'
 , LAST_UPDATED_TS TIMESTAMP_LTZ NOT NULL COMMENT 'LAST TIME THIS RECORD WAS INSERTED OR UPDATED'
)
;

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.ACCOUNT_STG
(
CDC_FLAG CHAR(1) COMMENT 'I OR U DENOTES INSERT OR UPDATE'
,CDC_DSN INT COMMENT 'DATABASE SEQUENCE NUMBER'
,CA_ID INT NOT NULL COMMENT 'CUSTOMER ACCOUNT IDENTIFIER'
,CA_B_ID INT NOT NULL COMMENT 'IDENTIFIER OF THE MANAGING BROKER'
,CA_C_ID INT NOT NULL COMMENT 'OWNING CUSTOMER IDENTIFIER'
,CA_NAME CHAR(50) COMMENT 'NAME OF CUSTOMER ACCOUNT'
,CA_TAX_ST INT COMMENT '0, 1 OR 2 TAX STATUS OF THIS ACCOUNT'
,CA_ST_ID CHAR(4) COMMENT 'ACTV OR INAC CUSTOMER STATUS TYPE IDENTIFIER'
)
;

CREATE OR REPLACE TABLE TPCDI_WH.PUBLIC.AUDIT
(
	  PROC_NAME VARCHAR NOT NULL COMMENT 'STORED PROCEDURE NAME'
	, LOG_TIME TIMESTAMP_LTZ NOT NULL COMMENT 'A TIMESTAMP SHORTLY AFTER THE PROC FINISHED'
	, BATCH_ID NUMBER NOT NULL COMMENT 'THE BATCH WHEN THE PROC WAS RUN'
	, INSERTED_ROWS NUMBER COMMENT 'THE NUMBER OF ROWS INSERTED BY A PROC RUN'
	, UPDATED_ROWS NUMBER COMMENT 'THE NUMBER OF ROWS UPDATED BY A PROC RUN'
)
;

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.CASHTRANSACTION_STG
(
 CDC_FLAG CHAR(1) COMMENT 'I DENOTES INSERT'
,CDC_DSN INT COMMENT 'DATABASE SEQUENCE NUMBER'
,CT_CA_ID INT NOT NULL COMMENT 'CUSTOMER ACCOUNT IDENTIFIER'
,CT_DTS DATETIME NOT NULL COMMENT 'TIMESTAMP OF WHEN THE TRADE TOOK PLACE'
,CT_AMT NUMBER(10,2) NOT NULL COMMENT 'AMOUNT OF THE CASH TRANSACTION'
,CT_NAME CHAR(100) NOT NULL COMMENT 'TRANSACTION NAME OR DESCRIPTION: E.G. "CASH FROM SALE OF DUPONT STOCK".'
)
;

CREATE OR REPLACE TABLE TPCDI_WH.PUBLIC.CTRL_BATCH
(
  BATCH_ID NUMBER(11) NOT NULL COMMENT 'BATCH NUMBER'
 ,BATCH_TS TIMESTAMP_LTZ NOT NULL COMMENT 'THE TIMESTAMP THE BATCH STARTED'
)
;

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.CUSTOMER_MGMT_STG
(
XML VARIANT COMMENT 'XML STRING'
)
;

CREATE OR REPLACE TABLE TPCDI_ODS.PUBLIC.CUSTOMER_ODS
(
   C_ID INT NOT NULL COMMENT 'CUSTOMER IDENTIFIER'
 , C_TAX_ID CHAR(20) NOT NULL COMMENT 'CUSTOMER’S TAX IDENTIFIER'
 , C_ST_ID CHAR(4) COMMENT 'ACTV OR INAC CUSTOMER STATUS TYPE IDENTIFIER'
 , C_L_NAME CHAR(25) NOT NULL COMMENT 'PRIMARY CUSTOMER''S LAST NAME.'
 , C_F_NAME CHAR(20) NOT NULL COMMENT 'PRIMARY CUSTOMER''S FIRST NAME.'
 , C_M_NAME CHAR(1) COMMENT 'PRIMARY CUSTOMER''S MIDDLE INITIAL'
 , C_GNDR CHAR(1) COMMENT 'GENDER OF THE PRIMARY CUSTOMER'
 , C_TIER NUMBER(1) COMMENT 'CUSTOMER TIER'
 , C_DOB DATE NOT NULL COMMENT 'CUSTOMER’S DATE OF BIRTH, AS YYYY-MM-DD.'
 , C_ADLINE1 CHAR(80) NOT NULL COMMENT 'ADDRESS LINE 1'
 , C_ADLINE2 CHAR(80) COMMENT 'ADDRESS LINE 2'
 , C_ZIPCODE CHAR(12) NOT NULL COMMENT 'ZIP OR POSTAL CODE'
 , C_CITY CHAR(25) NOT NULL COMMENT 'CITY'
 , C_STATE_PROV CHAR(20) NOT NULL COMMENT 'STATE OR PROVINCE'
 , C_CTRY CHAR(24) COMMENT 'COUNTRY'
 , C_CTRY_1 CHAR(3) COMMENT 'COUNTRY CODE FOR CUSTOMER''S PHONE 1.'
 , C_AREA_1 CHAR(3) COMMENT 'AREA CODE FOR CUSTOMER''S PHONE 1.'
 , C_LOCAL_1 CHAR(10) COMMENT 'LOCAL NUMBER FOR CUSTOMER''S PHONE 1.'
 , C_EXT_1 CHAR(5) COMMENT 'EXTENSION NUMBER FOR CUSTOMER''S PHONE 1.'
 , C_CTRY_2 CHAR(3) COMMENT 'COUNTRY CODE FOR CUSTOMER''S PHONE 2.'
 , C_AREA_2 CHAR(3) COMMENT 'AREA CODE FOR CUSTOMER''S PHONE 2.'
 , C_LOCAL_2 CHAR(10) COMMENT 'LOCAL NUMBER FOR CUSTOMER''S PHONE 2.'
 , C_EXT_2 CHAR(5) COMMENT 'EXTENSION NUMBER FOR CUSTOMER''S PHONE 2.'
 , C_CTRY_3 CHAR(3) COMMENT 'COUNTRY CODE FOR CUSTOMER''S PHONE 3.'
 , C_AREA_3 CHAR(3) COMMENT 'AREA CODE FOR CUSTOMER''S PHONE 3.'
 , C_LOCAL_3 CHAR(10) COMMENT 'LOCAL NUMBER FOR CUSTOMER''S PHONE 3.'
 , C_EXT_3 CHAR(5) COMMENT 'EXTENSION NUMBER FOR CUSTOMER''S PHONE 3.'
 , C_EMAIL_1 CHAR(100) COMMENT 'CUSTOMER''S E-MAIL ADDRESS 1.'
 , C_EMAIL_2 CHAR(100) COMMENT 'CUSTOMER''S E-MAIL ADDRESS 2.'
 , C_LCL_TX_ID CHAR(4) NOT NULL COMMENT 'CUSTOMER''S LOCAL TAX RATE'
 , C_NAT_TX_ID CHAR(4) NOT NULL COMMENT 'CUSTOMER''S NATIONAL TAX RATE'
 , LAST_UPDATED_TS TIMESTAMP_LTZ NOT NULL COMMENT 'LAST TIME THIS RECORD WAS INSERTED OR UPDATED'
)
;

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.CUSTOMER_STG
(
  CDC_FLAG CHAR(1) COMMENT 'DENOTES INSERT OR UPDATE'
 ,CDC_DSN INT COMMENT 'DATABASE SEQUENCE NUMBER'
 ,C_ID INT NOT NULL COMMENT 'CUSTOMER IDENTIFIER'
 ,C_TAX_ID CHAR(20) NOT NULL COMMENT 'CUSTOMER’S TAX IDENTIFIER'
 ,C_ST_ID CHAR(4) COMMENT 'ACTV OR INAC CUSTOMER STATUS TYPE IDENTIFIER'
 ,C_L_NAME CHAR(25) NOT NULL COMMENT 'PRIMARY CUSTOMER''S LAST NAME.'
 ,C_F_NAME CHAR(20) NOT NULL COMMENT 'PRIMARY CUSTOMER''S FIRST NAME.'
 ,C_M_NAME CHAR(1) COMMENT 'PRIMARY CUSTOMER''S MIDDLE INITIAL'
 ,C_GNDR CHAR(1) COMMENT 'GENDER OF THE PRIMARY CUSTOMER'
 ,C_TIER NUMBER(1) COMMENT 'CUSTOMER TIER'
 ,C_DOB DATE NOT NULL COMMENT 'CUSTOMER’S DATE OF BIRTH, AS YYYY-MM-DD.'
 ,C_ADLINE1 CHAR(80) NOT NULL COMMENT 'ADDRESS LINE 1'
 ,C_ADLINE2 CHAR(80) COMMENT 'ADDRESS LINE 2'
 ,C_ZIPCODE CHAR(12) NOT NULL COMMENT 'ZIP OR POSTAL CODE'
 ,C_CITY CHAR(25) NOT NULL COMMENT 'CITY'
 ,C_STATE_PROV CHAR(20) NOT NULL COMMENT 'STATE OR PROVINCE'
 ,C_CTRY CHAR(24) COMMENT 'COUNTRY'
 ,C_CTRY_1 CHAR(3) COMMENT 'COUNTRY CODE FOR CUSTOMER''S PHONE 1.'
 ,C_AREA_1 CHAR(3) COMMENT 'AREA CODE FOR CUSTOMER''S PHONE 1.'
 ,C_LOCAL_1 CHAR(10) COMMENT 'LOCAL NUMBER FOR CUSTOMER''S PHONE 1.'
 ,C_EXT_1 CHAR(5) COMMENT 'EXTENSION NUMBER FOR CUSTOMER''S PHONE 1.'
 ,C_CTRY_2 CHAR(3) COMMENT 'COUNTRY CODE FOR CUSTOMER''S PHONE 2.'
 ,C_AREA_2 CHAR(3) COMMENT 'AREA CODE FOR CUSTOMER''S PHONE 2.'
 ,C_LOCAL_2 CHAR(10) COMMENT 'LOCAL NUMBER FOR CUSTOMER''S PHONE 2.'
 ,C_EXT_2 CHAR(5) COMMENT 'EXTENSION NUMBER FOR CUSTOMER''S PHONE 2.'
 ,C_CTRY_3 CHAR(3) COMMENT 'COUNTRY CODE FOR CUSTOMER''S PHONE 3.'
 ,C_AREA_3 CHAR(3) COMMENT 'AREA CODE FOR CUSTOMER''S PHONE 3.'
 ,C_LOCAL_3 CHAR(10) COMMENT 'LOCAL NUMBER FOR CUSTOMER''S PHONE 3.'
 ,C_EXT_3 CHAR(5) COMMENT 'EXTENSION NUMBER FOR CUSTOMER''S PHONE 3.'
 ,C_EMAIL_1 CHAR(50) COMMENT 'CUSTOMER''S E-MAIL ADDRESS 1.'
 ,C_EMAIL_2 CHAR(50) COMMENT 'CUSTOMER''S E-MAIL ADDRESS 2.'
 ,C_LCL_TX_ID CHAR(4) NOT NULL COMMENT 'CUSTOMER''S LOCAL TAX RATE'
 ,C_NAT_TX_ID CHAR(4) NOT NULL COMMENT 'CUSTOMER''S NATIONAL TAX RATE'
)
;

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.DAILYMARKET_STG
(
  CDC_FLAG CHAR(1) COMMENT 'I DENOTES INSERT'
 ,CDC_DSN INT COMMENT 'DATABASE SEQUENCE NUMBER'
 ,DM_DATE DATE NOT NULL COMMENT 'DATE OF LAST COMPLETED TRADING DAY.'
 ,DM_S_SYMB CHAR(15) NOT NULL COMMENT 'SECURITY SYMBOL OF THE SECURITY'
 ,DM_CLOSE NUMBER(8,2) NOT NULL COMMENT 'CLOSING PRICE OF THE SECURITY ON THIS DAY.'
 ,DM_HIGH NUMBER(8,2) NOT NULL COMMENT 'HIGHEST PRICE FOR THE SECUIRITY ON THIS DAY.'
 ,DM_LOW NUMBER(8,2) NOT NULL COMMENT 'LOWEST PRICE FOR THE SECURITY ON THIS DAY.'
 ,DM_VOL INT NOT NULL COMMENT 'VOLUME OF THE SECURITY ON THIS DAY.'
)
;

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.DATE_STG
(
  SK_DATEID INT NOT NULL COMMENT 'SURROGATE KEY FOR THE DATE'
 ,DATEVALUE CHAR(20) NOT NULL COMMENT 'THE DATE AS TEXT, E.G. “2004-07-07”'
 ,DATEDESC CHAR(20) NOT NULL COMMENT 'THE DATE MONTH DAY, YYYY, E.G. JULY 7, 2004'
 ,CALENDARYEARID NUMBER(4) NOT NULL COMMENT 'YEAR NUMBER AS A NUMBER'
 ,CALENDARYEARDESC CHAR(20) NOT NULL COMMENT 'YEAR NUMBER AS TEXT'
 ,CALENDARQTRID NUMBER(5) NOT NULL COMMENT 'QUARTER AS A NUMBER, E.G. 20042'
 ,CALENDARQTRDESC CHAR(20) NOT NULL COMMENT 'QUARTER AS TEXT, E.G. “2004 Q2”'
 ,CALENDARMONTHID NUMBER(6) NOT NULL COMMENT 'MONTH AS A NUMBER, E.G. 20047'
 ,CALENDARMONTHDESC CHAR(20) NOT NULL COMMENT 'MONTH AS TEXT, E.G. “2004 JULY”'
 ,CALENDARWEEKID NUMBER(6) NOT NULL COMMENT 'WEEK AS A NUMBER, E.G. 200428'
 ,CALENDARWEEKDESC CHAR(20) NOT NULL COMMENT 'WEEK AS TEXT, E.G. “2004-W28”'
 ,DAYOFWEEKNUM NUMBER(1) NOT NULL COMMENT 'DAY OF WEEK AS A NUMBER, E.G. 3'
 ,DAYOFWEEKDESC CHAR(10) NOT NULL COMMENT 'DAY OF WEEK AS TEXT, E.G. “WEDNESDAY”'
 ,FISCALYEARID NUMBER(4) NOT NULL COMMENT 'FISCAL YEAR AS A NUMBER, E.G. 2005'
 ,FISCALYEARDESC CHAR(20) NOT NULL COMMENT 'FISCAL YEAR AS TEXT, E.G. “2005”'
 ,FISCALQTRID NUMBER(5) NOT NULL COMMENT 'FISCAL QUARTER AS A NUMBER, E.G. 20051'
 ,FISCALQTRDESC CHAR(20) NOT NULL COMMENT 'FISCAL QUARTER AS TEXT, E.G. “2005 Q1”'
 ,HOLIDAYFLAG BOOLEAN COMMENT 'INDICATES HOLIDAYS'
)
;

CREATE OR REPLACE TABLE TPCDI_WH.PUBLIC.DIM_ACCOUNT
(
   SK_ACCOUNT_ID NUMBER(11) NOT NULL COMMENT 'SURROGATE KEY FOR ACCOUNTID'
 , ACCOUNT_ID NUMBER(11) NOT NULL COMMENT 'CUSTOMER ACCOUNT IDENTIFIER'
 , SK_BROKER_ID NUMBER(11) NOT NULL COMMENT 'SURROGATE KEY OF MANAGING BROKER'
 , SK_CUSTOMER_ID NUMBER(11) NOT NULL COMMENT 'SURROGATE KEY OF CUSTOMER'
 , STATUS CHAR(10) NOT NULL COMMENT 'ACCOUNT STATUS, ACTIVE OR CLOSED'
 , ACCOUNT_DESC CHAR(50) COMMENT 'NAME OF CUSTOMER ACCOUNT'
 , TAX_STATUS NUMBER(1) COMMENT '0, 1 OR 2 TAX STATUS OF THIS ACCOUNT'
 , BATCH_ID NUMBER(5) NOT NULL COMMENT 'BATCH ID WHEN THIS RECORD WAS INSERTED'
 , INSERTED_TS TIMESTAMP_LTZ NOT NULL COMMENT 'TIMESTAMP WHEN THIS RECORD WAS INSERTED' 
 )
;

CREATE OR REPLACE TABLE TPCDI_WH.PUBLIC.DIM_BROKER
(
   SK_BROKER_ID NUMBER(11) NOT NULL COMMENT 'SURROGATE KEY FOR BROKER'
 , BROKER_ID NUMBER(11) NOT NULL COMMENT 'NATURAL KEY FOR BROKER'
 , MANAGER_ID NUMBER(11) COMMENT 'NATURAL KEY FOR MANAGER’S HR RECORD'
 , FIRST_NAME CHAR(50) NOT NULL COMMENT 'FIRST NAME'
 , LAST_NAME CHAR(50) NOT NULL COMMENT 'LAST NAME'
 , MIDDLE_INITIAL CHAR(1) COMMENT 'MIDDLE INITIAL'
 , BRANCH CHAR(50) COMMENT 'FACILITY IN WHICH EMPLOYEE HAS OFFICE'
 , OFFICE CHAR(50) COMMENT 'OFFICE NUMBER OR DESCRIPTION'
 , PHONE CHAR(14) COMMENT 'EMPLOYEE PHONE NUMBER'
 , BATCH_ID NUMBER(5) NOT NULL COMMENT 'BATCH ID WHEN THIS RECORD WAS INSERTED'
 , INSERTED_TS TIMESTAMP_LTZ NOT NULL COMMENT 'TIMESTAMP WHEN THIS RECORD WAS INSERTED' 
)
;

CREATE OR REPLACE TABLE TPCDI_WH.PUBLIC.DIM_COMPANY
(
  SK_COMPANY_ID NUMBER(11) NOT NULL COMMENT 'SURROGATE KEY FOR COMPANYID'
, COMPANY_ID NUMBER(11) NOT NULL COMMENT 'COMPANY IDENTIFIER (CIK NUMBER)'
, STATUS CHAR(10) NOT NULL COMMENT 'COMPANY STATUS'
, NAME CHAR(60) NOT NULL COMMENT 'COMPANY NAME'
, INDUSTRY CHAR(50) NOT NULL COMMENT 'COMPANY''S INDUSTRY'
, SP_RATING CHAR(4) COMMENT 'STANDARD & POOR COMPANY''S RATING'
, IS_LOW_GRADE INT COMMENT 'TRUE IF THIS COMPANY IS LOW GRADE'
, CEO CHAR(100) NOT NULL COMMENT 'CEO NAME'
, ADDRESS_LINE1 CHAR(80) COMMENT 'ADDRESS LINE 1'
, ADDRESS_LINE2 CHAR(80) COMMENT 'ADDRESS LINE 2'
, POSTAL_CODE CHAR(12) NOT NULL COMMENT 'ZIP OR POSTAL CODE'
, CITY CHAR(25) NOT NULL COMMENT 'CITY'
, STATE_PROV CHAR(20) NOT NULL COMMENT 'STATE OR PROVINCE'
, COUNTRY CHAR(24) COMMENT 'COUNTRY'
, DESCRIPTION CHAR(150) NOT NULL COMMENT 'COMPANY DESCRIPTION'
, FOUNDING_DATE DATE COMMENT 'DATE THE COMPANY WAS FOUNDED'
-- , IS_CURRENT BOOLEAN NOT NULL COMMENT 'TRUE IF THIS IS THE CURRENT RECORD'
, BATCH_ID NUMBER(5) NOT NULL COMMENT 'BATCH ID WHEN THIS RECORD WAS INSERTED'
, INSERTED_TS TIMESTAMP_LTZ NOT NULL COMMENT 'TIMESTAMP WHEN THIS RECORD WAS INSERTED'
-- , EFFECTIVE_DATE DATE NOT NULL COMMENT 'BEGINNING OF DATE RANGE WHEN THIS RECORD WAS THE CURRENT RECORD'
-- , END_DATE DATE NOT NULL COMMENT 'ENDING OF DATE RANGE WHEN THIS RECORD WAS THE CURRENT RECORD. A RECORD THAT IS NOT EXPIRED WILL USE THE DATE 9999-12-31.'
)
;

CREATE OR REPLACE TABLE TPCDI_WH.PUBLIC.DIM_CUSTOMER
(
   SK_CUSTOMER_ID NUMBER(11) NOT NULL COMMENT 'SURROGATE KEY FOR CUSTOMERID'
 , CUSTOMER_ID NUMBER(11) NOT NULL COMMENT 'CUSTOMER IDENTIFIER'
 , TAX_ID CHAR(20) NOT NULL COMMENT 'CUSTOMER''S TAX IDENTIFIER'
 , STATUS CHAR(10) NOT NULL COMMENT 'CUSTOMER STATUS TYPE'
 , LAST_NAME CHAR(30) NOT NULL COMMENT 'CUSTOMER''S LAST NAME.'
 , FIRST_NAME CHAR(30) NOT NULL COMMENT 'CUSTOMER''S FIRST NAME.'
 , MIDDLE_INITIAL CHAR(1) COMMENT 'CUSTOMER''S MIDDLE NAME INITIAL'
 , GENDER CHAR(1) COMMENT 'GENDER OF THE CUSTOMER'
 , TIER NUMBER(1) COMMENT 'CUSTOMER TIER'
 , DOB DATE NOT NULL COMMENT 'CUSTOMER''S DATE OF BIRTH.'
 , ADDRESS_LINE_1 CHAR(80) NOT NULL COMMENT 'ADDRESS LINE 1'
 , ADDRESS_LINE_2 CHAR(80) COMMENT 'ADDRESS LINE 2'
 , POSTAL_CODE CHAR(12) NOT NULL COMMENT 'ZIP OR POSTAL CODE'
 , CITY CHAR(25) NOT NULL COMMENT 'CITY'
 , STATE_PROV CHAR(20) NOT NULL COMMENT 'STATE OR PROVINCE'
 , COUNTRY CHAR(24) COMMENT 'COUNTRY'
 , PHONE1 CHAR(30) COMMENT 'PHONE NUMBER 1'
 , PHONE2 CHAR(30) COMMENT 'PHONE NUMBER 2'
 , PHONE3 CHAR(30) COMMENT 'PHONE NUMBER 3'
 , EMAIL1 CHAR(50) COMMENT 'EMAIL ADDRESS 1'
 , EMAIL2 CHAR(50) COMMENT 'EMAIL ADDRESS 2'
 , NATIONAL_TAX_RATE_DESC CHAR(50) COMMENT 'NATIONAL TAX RATE DESCRIPTION'
 , NATIONAL_TAX_RATE NUMBER(6,5) COMMENT 'NATIONAL TAX RATE'
 , LOCAL_TAX_RATE_DESC CHAR(50) COMMENT 'LOCAL TAX RATE DESCRIPTION'
 , LOCAL_TAX_RATE NUMBER(6,5) COMMENT 'LOCAL TAX RATE'
 , AGENCY_ID CHAR(30) COMMENT 'AGENCY IDENTIFIER'
 , CREDIT_RATING NUMBER(5) COMMENT 'CREDIT RATING'
 , NET_WORTH NUMBER(10) COMMENT 'NET WORTH'
 , MARKETING_NAMEPLATE CHAR(100) COMMENT 'MARKETING NAMEPLATE'
 , BATCH_ID NUMBER(5) NOT NULL COMMENT 'BATCH ID WHEN THIS RECORD WAS INSERTED'
 , INSERTED_TS TIMESTAMP_LTZ NOT NULL COMMENT 'TIMESTAMP WHEN THIS RECORD WAS INSERTED' )
;

CREATE OR REPLACE TABLE TPCDI_WH.PUBLIC.DIM_DATE
(
DATE_ID NUMBER NOT NULL COMMENT 'SURROGATE KEY FOR THE DATE'
,DATE_VALUE DATE NOT NULL COMMENT 'THE DATE STORED APPROPRIATELY FOR DOING COMPARISONS IN THE DATA WAREHOUSE'
,DATE_DESC VARCHAR(20) NOT NULL COMMENT 'THE DATE IN FULL WRITTEN FORM, E.G. JULY 7, 2004'
,CALENDAR_YEAR_ID NUMBER NOT NULL COMMENT 'YEAR NUMBER AS A NUMBER'
,CALENDAR_YEAR_DESC VARCHAR(20) NOT NULL COMMENT 'YEAR NUMBER AS TEXT'
,CALENDAR_QTR_ID NUMBER NOT NULL COMMENT 'QUARTER AS A NUMBER, E.G. 20042'
,CALENDAR_QTR_DESC VARCHAR(20) NOT NULL COMMENT 'QUARTER AS TEXT, E.G. 2004 Q2'
,CALENDAR_MONTH_ID NUMBER NOT NULL COMMENT 'MONTH AS A NUMBER, E.G. 20047'
,CALENDAR_MONTH_DESC VARCHAR(20) NOT NULL COMMENT 'MONTH AS TEXT, E.G. 2004 JULY'
,CALENDAR_WEEK_ID NUMBER NOT NULL COMMENT 'WEEK AS A NUMBER, E.G. 200428'
,CALENDAR_WEEK_DESC VARCHAR(20) NOT NULL COMMENT 'WEEK AS TEXT, E.G. 2004-W28'
,DAY_OF_WEEK_NUM NUMBER NOT NULL COMMENT 'DAY OF WEEK AS A NUMBER, E.G. 3'
,DAY_OF_WEEK_DESC VARCHAR(10) NOT NULL COMMENT 'DAY OF WEEK AS TEXT, E.G. WEDNESDAY'
,FISCAL_YEAR_ID NUMBER NOT NULL COMMENT 'FISCAL YEAR AS A NUMBER, E.G. 2005'
,FISCAL_YEAR_DESC VARCHAR(20) NOT NULL COMMENT 'FISCAL YEAR AS TEXT, E.G. 2005'
,FISCAL_QTR_ID NUMBER NOT NULL COMMENT 'FISCAL QUARTER AS A NUMBER, E.G. 20051'
,FISCAL_QTR_DESC VARCHAR(20) NOT NULL COMMENT 'FISCAL QUARTER AS TEXT, E.G. 2005 Q1'
,HOLIDAY_FLAG BOOLEAN COMMENT 'INDICATES HOLIDAYS'
)
;

CREATE OR REPLACE TABLE TPCDI_WH.PUBLIC.DIM_FINANCIAL
(
  SK_COMPANYID NUMBER(11) NOT NULL COMMENT 'COMPANY SK.'
, FI_YEAR NUMBER(4) NOT NULL COMMENT 'YEAR OF THE QUARTER END.'
, FI_QTR NUMBER(1) NOT NULL COMMENT 'QUARTER NUMBER THAT THE FINANCIAL INFORMATION IS FOR: VALID VALUES 1, 2, 3, 4.'
, FI_QTR_START_DATE DATE NOT NULL COMMENT 'START DATE OF QUARTER.'
, FI_REVENUE NUMBER(15,2) NOT NULL COMMENT 'REPORTED REVENUE FOR THE QUARTER.'
, FI_NET_EARN NUMBER(15,2) NOT NULL COMMENT 'NET EARNINGS REPORTED FOR THE QUARTER.'
, FI_BASIC_EPS NUMBER(10,2) NOT NULL COMMENT 'BASIC EARNINGS PER SHARE FOR THE QUARTER.'
, FI_DILUT_EPS NUMBER(10,2) NOT NULL COMMENT 'DILUTED EARNINGS PER SHARE FOR THE QUARTER.'
, FI_MARGIN NUMBER(10,2) NOT NULL COMMENT 'PROFIT DIVIDED BY REVENUES FOR THE QUARTER.'
, FI_INVENTORY NUMBER(15,2) NOT NULL COMMENT 'VALUE OF INVENTORY ON HAND AT THE END OF QUARTER.'
, FI_ASSETS NUMBER(15,2) NOT NULL COMMENT 'VALUE OF TOTAL ASSETS AT THE END OF THE QUARTER.'
, FI_LIABILITY NUMBER(15,2) NOT NULL COMMENT 'VALUE OF TOTAL LIABILITIES AT THE END OF THE QUARTER.'
, FI_OUT_BASIC NUMBER(12) NOT NULL COMMENT 'AVERAGE NUMBER OF SHARES OUTSTANDING (BASIC).'
, FI_OUT_DILUT NUMBER(12) NOT NULL COMMENT 'AVERAGE NUMBER OF SHARES OUTSTANDING (DILUTED).'
, INSERTED_TS TIMESTAMP_LTZ NOT NULL COMMENT 'TIMESTAMP WHEN THIS RECORD WAS INSERTED' 
)
;

CREATE OR REPLACE TABLE TPCDI_WH.PUBLIC.DIM_INDUSTRY
(
  IN_ID CHAR(2) NOT NULL COMMENT 'INDUSTRY CODE'
 ,IN_NAME CHAR(50) NOT NULL COMMENT 'INDUSTRY DESCRIPTION'
)
;

CREATE OR REPLACE TABLE TPCDI_WH.PUBLIC.DIM_SECURITY
(
  SK_SECURITY_ID NUMBER(11) NOT NULL COMMENT 'SURROGATE KEY FOR SYMBOL'
, SYMBOL CHAR(15) NOT NULL COMMENT 'IDENTIFIES SECURITY ON TICKER'
, ISSUE CHAR(6) NOT NULL COMMENT 'ISSUE TYPE'
, STATUS CHAR(10) NOT NULL COMMENT 'STATUS TYPE'
, NAME CHAR(70) NOT NULL COMMENT 'SECURITY NAME'
, EXCHANGE_ID CHAR(6) NOT NULL COMMENT 'EXCHANGE THE SECURITY IS TRADED ON'
, SK_COMPANY_ID NUMBER(11) NOT NULL COMMENT 'COMPANY ISSUING SECURITY'
, SHARES_OUTSTANDING NUMBER(12) NOT NULL COMMENT 'SHARES OUTSTANDING'
, FIRST_TRADE DATE NOT NULL COMMENT 'DATE OF FIRST TRADE'
, FIRST_TRADE_ON_EXCHANGE DATE NOT NULL COMMENT 'DATE OF FIRST TRADE ON THIS EXCHANGE'
, DIVIDEND NUMBER(10,2) NOT NULL COMMENT 'ANNUAL DIVIDEND PER SHARE'
--, IS_CURRENT BOOLEAN NOT NULL COMMENT 'TRUE IF THIS IS THE CURRENT RECORD'
, BATCH_ID NUMBER(5) NOT NULL COMMENT 'BATCH ID WHEN THIS RECORD WAS INSERTED'
, INSERTED_TS TIMESTAMP_LTZ NOT NULL COMMENT 'TIMESTAMP WHEN THIS RECORD WAS INSERTED'
--, EFFECTIVE_DATE DATE NOT NULL COMMENT 'BEGINNING OF DATE RANGE WHEN THIS RECORD WAS THE CURRENT RECORD'
--, END_DATE DATE NOT NULL COMMENT 'ENDING OF DATE RANGE WHEN THIS RECORD WAS THE CURRENT RECORD. A RECORD THAT IS NOT EXPIRED WILL USE THE DATE 9999-12-31.'
)
;

CREATE OR REPLACE TABLE TPCDI_WH.PUBLIC.DIM_STATUS_TYPE
(
  ST_ID CHAR(4) NOT NULL COMMENT 'STATUS CODE'
 ,ST_NAME CHAR(10) NOT NULL COMMENT 'STATUS DESCRIPTION'
)
;

CREATE OR REPLACE TABLE TPCDI_WH.PUBLIC.DIM_TAX_RATE
(
  TX_ID CHAR(4) NOT NULL COMMENT 'TAX RATE CODE'
 ,TX_NAME CHAR(50) NOT NULL COMMENT 'TAX RATE DESCRIPTION'
 ,TX_RATE NUMBER(6,5) NOT NULL COMMENT 'TAX RATE'
)
;

CREATE OR REPLACE TABLE TPCDI_WH.PUBLIC.DIM_TIME
(
TIME_ID NUMBER NOT NULL COMMENT 'SURROGATE KEY FOR THE TIME'
,TIME_VALUE TIME NOT NULL COMMENT 'THE TIME STORED APPROPRIATELY FOR DOING COMPARISONS IN THE DATA WAREHOUSE'
,HOUR_ID NUMBER NOT NULL COMMENT 'HOUR NUMBER AS A NUMBER, E.G. 01'
,HOUR_DESC VARCHAR(20) NOT NULL COMMENT 'HOUR NUMBER AS TEXT, E.G. 01'
,MINUTE_ID NUMBER NOT NULL COMMENT 'MINUTE AS A NUMBER, E.G. 23'
,MINUTE_DESC VARCHAR(20) NOT NULL COMMENT 'MINUTE AS TEXT, E.G. 01:23'
,SECOND_ID NUMBER NOT NULL COMMENT 'SECOND AS A NUMBER, E.G. 45'
,SECOND_DESC VARCHAR(20) NOT NULL COMMENT 'SECOND AS TEXT, E.G. 01:23:45'
,MARKET_HOURS_FLAG BOOLEAN COMMENT 'INDICATES A TIME DURING MARKET HOURS'
,OFFICE_HOURS_FLAG BOOLEAN COMMENT 'INDICATES A TIME DURING OFFICE HOURS'
)
;

CREATE OR REPLACE TABLE TPCDI_WH.PUBLIC.DIM_TRADE
(
   TRADE_ID NUMBER(11) COMMENT 'NOT NULL TRADE IDENTIFIER'
 , SK_BROKER_ID NUMBER(11) COMMENT 'SURROGATE KEY FOR BROKERID'
 , SK_CREATE_DATE_ID NUMBER(11) NOT NULL COMMENT 'SURROGATE KEY FOR DATE CREATED'
 , SK_CREATE_TIME_ID NUMBER(11) NOT NULL COMMENT 'SURROGATE KEY FOR TIME CREATED'
 , SK_CLOSE_DATE_ID NUMBER(11) COMMENT 'SURROGATE KEY FOR DATE CLOSED'
 , SK_CLOSE_TIME_ID NUMBER(11) COMMENT 'SURROGATE KEY FOR TIME CLOSED'
 , STATUS CHAR(10) NOT NULL COMMENT 'TRADE STATUS'
 , TYPE CHAR(12) NOT NULL COMMENT 'TRADE TYPE'
 , CASH_FLAG INT NOT NULL COMMENT 'IS THIS TRADE A CASH (1) OR MARGIN (0) TRADE?'
 , SK_SECURITY_ID NUMBER(11) NOT NULL COMMENT 'SURROGATE KEY FOR SECURITYID'
 , SK_COMPANY_ID NUMBER(11) NOT NULL COMMENT 'SURROGATE KEY FOR COMPANYID'
 , QUANTITY NUMBER(6,0) NOT NULL COMMENT 'QUANTITY OF SECURITIES TRADED.'
 , BID_PRICE NUMBER(8,2) NOT NULL COMMENT 'THE REQUESTED UNIT PRICE.'
 , SK_CUSTOMER_ID NUMBER(11) NOT NULL COMMENT 'SURROGATE KEY FOR CUSTOMERID'
 , SK_ACCOUNT_ID NUMBER(11) NOT NULL COMMENT 'SURROGATE KEY FOR ACCOUNTID'
 , EXECUTED_BY CHAR(64) NOT NULL COMMENT 'NAME OF PERSON EXECUTING THE TRADE.'
 , TRADE_PRICE NUMBER(8,2) COMMENT 'UNIT PRICE AT WHICH THE SECURITY WAS TRADED.'
 , FEE NUMBER(10,2) COMMENT 'FEE CHARGED FOR PLACING THIS TRADE REQUEST'
 , COMMISSION NUMBER(10,2) COMMENT 'COMMISSION EARNED ON THIS TRADE'
 , TAX NUMBER(10,2) COMMENT 'AMOUNT OF TAX DUE ON THIS TRADE'
 , BATCH_ID NUMBER(5) NOT NULL COMMENT 'BATCH ID WHEN THIS RECORD WAS INSERTED'
 , LAST_UPDATED_TS TIMESTAMP_LTZ NOT NULL COMMENT 'TIMESTAMP WHEN THIS RECORD WAS LAST UPDATED'
)
;

CREATE OR REPLACE TABLE TPCDI_WH.PUBLIC.DIM_TRADE_TYPE 
(
TT_ID CHAR(3) NOT NULL COMMENT 'TRADE TYPE CODE'
,TT_NAME CHAR(12) NOT NULL COMMENT 'TRADE TYPE DESCRIPTION'
,TT_IS_SELL INT NOT NULL COMMENT 'FLAG INDICATING A SALE'
,TT_IS_MRKT INT NOT NULL COMMENT 'FLAG INDICATING A MARKET ORDER'
)
;

CREATE OR REPLACE TABLE TPCDI_WH.PUBLIC.FACT_CASH_BALANCES
(
   SK_CUSTOMER_ID NUMBER(11) NOT NULL COMMENT 'SURROGATE KEY FOR CUSTOMERID'
 , SK_ACCOUNT_ID NUMBER(11) NOT NULL COMMENT 'SURROGATE KEY FOR ACCOUNTID'
 , SK_DATE_ID NUMBER(11) NOT NULL COMMENT 'SURROGATE KEY FOR THE DATE'
 , CASH NUMBER(15,2) NOT NULL COMMENT 'CASH BALANCE FOR THE ACCOUNT AFTER APPLYING CHANGES FOR THIS DAY'
 , BATCH_ID NUMBER(5) NOT NULL COMMENT 'BATCH ID WHEN THIS RECORD WAS INSERTED'
)
;

CREATE OR REPLACE TABLE TPCDI_WH.PUBLIC.FACT_HOLDINGS
(
   TRADE_ID NUMBER(11) COMMENT 'KEY FOR ORIGNIAL TRADE INDENTIFIER'
 , CURRENT_TRADE_ID NUMBER(11) COMMENT 'KEY FOR THE CURRENT TRADE'
 , SK_CUSTOMER_ID NUMBER(11) COMMENT 'SURROGATE KEY FOR CUSTOMER IDENTIFIER'
 , SK_ACCOUNT_ID NUMBER(11) COMMENT 'SURROGATE KEY FOR ACCOUNT IDENTIFIER'
 , SK_SECURITY_ID NUMBER(11) COMMENT 'SURROGATE KEY FOR SECURITY IDENTIFIER'
 , SK_COMPANY_ID NUMBER(11) COMMENT 'SURROGATE KEY FOR COMPANY IDENTIFIER'
 , SK_DATE_ID NUMBER(11) COMMENT 'SURROGATE KEY FOR THE DATE ASSOCIATED WITH THE CURRENT TRADE'
 , SK_TIME_ID NUMBER(11) COMMENT 'SURROGATE KEY FOR THE TIME ASSOCIATED WITH THE CURRENT TRADE'
 , CURRENT_PRICE NUMBER(8,2) COMMENT 'UNIT PRICE OF THIS SECURITY FOR THE CURRENT TRADE'
 , CURRENT_HOLDING NUMBER(6) COMMENT 'QUANTITY OF A SECURITY HELD AFTER THE CURRENT TRADE. THE VALUE CAN BE A POSITIVE OR NEGATIVE INTEGER'
 , BATCH_ID NUMBER(5) COMMENT 'BATCH ID WHEN THIS RECORD WAS INSERTED'
)
;

CREATE OR REPLACE TABLE TPCDI_WH.PUBLIC.FACT_MARKET_HISTORY
(
   SK_SECURITY_ID NUMBER(11) NOT NULL COMMENT 'SURROGATE KEY FOR SECURITYID'
 , SK_COMPANY_ID NUMBER(11) NOT NULL COMMENT 'SURROGATE KEY FOR COMPANYID'
 , SK_DATE_ID NUMBER(11) NOT NULL COMMENT 'SURROGATE KEY FOR THE DATE'
 , PE_RATIO NUMBER(10,2) COMMENT 'PRICE TO EARNINGS PER SHARE RATIO'
 , YIELD NUMBER(5,2) NOT NULL COMMENT 'DIVIDEND TO PRICE RATIO, AS A PERCENTAGE'
 , FIFTY_TWO_WEEK_HIGH NUMBER(8,2) NOT NULL COMMENT 'SECURITY HIGHEST PRICE IN LAST 52 WEEKS FROM THIS DAY'
 , SK_FIFTY_TWO_WEEK_HIGH_DATE NUMBER(11) NOT NULL COMMENT 'EARLIEST DATE ON WHICH THE 52 WEEK HIGH PRICE WAS SET'
 , FIFTY_TWO_WEEK_LOW NUMBER(8,2) NOT NULL COMMENT 'SECURITY LOWEST PRICE IN LAST 52 WEEKS FROM THIS DAY'
 , SK_FIFTY_TWO_WEEK_LOW_DATE NUMBER(11) NOT NULL COMMENT 'EARLIEST DATE ON WHICH THE 52 WEEK LOW PRICE WAS SET'
 , CLOSE_PRICE NUMBER(8,2) NOT NULL COMMENT 'SECURITY CLOSING PRICE ON THIS DAY'
 , DAY_HIGH NUMBER(8,2) NOT NULL COMMENT 'HIGHEST PRICE FOR THE SECURITY ON THIS DAY'
 , DAY_LOW NUMBER(8,2) NOT NULL COMMENT 'LOWEST PRICE FOR THE SECURITY ON THIS DAY'
 , VOLUME NUMBER(12) NOT NULL COMMENT 'TRADING VOLUME OF THE SECURITY ON THIS DAY'
 , BATCH_ID NUMBER(5) NOT NULL COMMENT 'BATCH ID WHEN THIS RECORD WAS INSERTED'
)
;

CREATE OR REPLACE TABLE TPCDI_WH.PUBLIC.FACT_PROSPECT
(
AGENCY_ID CHAR(30) NOT NULL COMMENT 'UNIQUE IDENTIFIER FROM AGENCY'
,SK_RECORD_DATE_ID NUMBER NOT NULL COMMENT 'LAST DATE THIS PROSPECT APPEARED IN INPUT'
,SK_UPDATE_DATE_ID NUMBER NOT NULL COMMENT 'LATEST CHANGE DATE FOR THIS PROSPECT'
,BATCH_ID NUMBER(5) NOT NULL COMMENT 'BATCH ID WHEN THIS RECORD WAS LAST MODIFIED'
,IS_CUSTOMER BOOLEAN NOT NULL COMMENT 'TRUE IF THIS PERSON IS ALSO IN DIMCUSTOMER, ELSE FALSE'
,LAST_NAME CHAR(30) NOT NULL COMMENT 'LAST NAME'
,FIRST_NAME CHAR(30) NOT NULL COMMENT 'FIRST NAME'
,MIDDLE_INITIAL CHAR(1)  COMMENT 'MIDDLE INITIAL'
,GENDER CHAR(1)  COMMENT 'M/F/U'
,ADDRESS_LINE1 CHAR(80) COMMENT 'POSTAL ADDRESS'
,ADDRESS_LINE2 CHAR(80) COMMENT 'POSTAL ADDRESS'
,POSTAL_CODE CHAR(12) COMMENT 'POSTAL CODE'
,CITY CHAR(25) NOT NULL COMMENT 'CITY'
,STATE CHAR(20) NOT NULL COMMENT 'STATE OR PROVINCE'
,COUNTRY CHAR(24) COMMENT 'POSTAL COUNTRY'
,PHONE CHAR(30) COMMENT 'TELEPHONE NUMBER'
,INCOME NUMBER(9) COMMENT 'ANNUAL INCOME'
,NUMBER_CARS NUMBER(2) COMMENT 'CARS OWNED'
,NUMBER_CHILDREN NUMBER(2) COMMENT 'DEPENDENT CHILDREN'
,MARITAL_STATUS CHAR(1) COMMENT 'S/M/D/W/U'
,AGE NUMBER(3) COMMENT 'CURRENT AGE'
,CREDIT_RATING NUMBER(4) COMMENT 'NUMERIC RATING'
,OWN_OR_RENT_FLAG CHAR(1) COMMENT 'O/R/U'
,EMPLOYER CHAR(30) COMMENT 'NAME OF EMPLOYER'
,NUMBER_CREDIT_CARDS NUMBER(2) COMMENT 'CREDIT CARDS'
,NET_WORTH NUMBER(12) COMMENT 'ESTIMATED TOTAL NET WORTH'
,MARKETING_NAMEPLATE CHAR(100) COMMENT 'FOR MARKETING PURPOSES'
)
;

CREATE OR REPLACE TABLE TPCDI_WH.PUBLIC.FACT_WATCHES
(
   SK_CUSTOMER_ID NUMBER(11) NOT NULL COMMENT 'CUSTOMER ASSOCIATED WITH WATCH LIST'
 , SK_SECURITY_ID NUMBER(11) NOT NULL COMMENT 'SECURITY LISTED ON WATCH LIST'
 , SK_DATE_ID_DATE_PLACED NUMBER(11) NOT NULL COMMENT 'DATE THE WATCH LIST ITEM WAS ADDED'
 , SK_DATE_ID_DATE_REMOVED NUMBER(11) COMMENT 'DATE THE WATCH LIST ITEM WAS REMOVED'
 , BATCH_ID NUMBER(5) NOT NULL COMMENT 'BATCH ID WHEN THIS RECORD WAS INSERTED'
)
;

CREATE OR REPLACE TABLE TPCDI_ODS.PUBLIC.FINWIRE_CMP_ODS
(
    PTS TIMESTAMP_NTZ NOT NULL COMMENT 'POSTING DATE & TIME AS YYYYMMDD-HHMMSS'
  , REC_TYPE VARCHAR(3) NOT NULL COMMENT 'CMP'
  , COMPANY_NAME VARCHAR(60) NOT NULL COMMENT 'NAME OF THE COMPANY'
  , CIK VARCHAR(10) NOT NULL COMMENT 'COMPANY IDENTIFICATION CODE FROM SEC'
  , STATUS VARCHAR(4) NOT NULL COMMENT 'ACTV FOR ACTIVE COMPANY, INAC FOR INACTIVE'
  , INDUSTRY_ID VARCHAR(2) NOT NULL COMMENT 'CODE FOR INDUSTRY SEGMENT'
  , SP_RATING VARCHAR(4) NOT NULL COMMENT 'S&P RATING'
  , FOUNDING_DATE DATE COMMENT 'A DATE AS YYYYMMDD'
  , ADDR_LINE1 VARCHAR(80) NOT NULL COMMENT 'MAILING ADDRESS'
  , ADDR_LINE2 VARCHAR(80) COMMENT 'MAILING ADDRESS'
  , POSTAL_CODE VARCHAR(12) NOT NULL COMMENT 'MAILING ADDRESS'
  , CITY VARCHAR(25) NOT NULL COMMENT 'MAILING ADDRESS'
  , STATE_PROVINCE VARCHAR(20) NOT NULL COMMENT 'MAILING ADDRESS'
  , COUNTRY VARCHAR(24) COMMENT 'MAILING ADDRESS'
  , CEO_NAME VARCHAR(46) NOT NULL COMMENT 'NAME OF COMPANY CEO'
  , DESCRIPTION VARCHAR(150) NOT NULL COMMENT 'DESCRIPTION OF THE COMPANY'
  , LAST_UPDATED_TS TIMESTAMP_LTZ NOT NULL COMMENT 'LAST TIME THIS RECORD WAS INSERTED OR UPDATED'
)
;

CREATE OR REPLACE TABLE TPCDI_ODS.PUBLIC.FINWIRE_FIN_ODS
(
  PTS TIMESTAMP_NTZ NOT NULL COMMENT 'POSTING DATE & TIME AS YYYYMMDD-HHMMSS'
  ,REC_TYPE VARCHAR(3) NOT NULL COMMENT 'FIN'
  ,YEAR NUMBER(4,0) NOT NULL COMMENT 'YEAR OF THE QUARTER END'
  ,QUARTER NUMBER(1,0) NOT NULL COMMENT 'QUARTER NUMBER: VALID VALUES ARE 1, 2, 3, 4'
  ,QTR_START_DATE DATE NOT NULL COMMENT 'START DATE OF QUARTER, AS YYYYMMDD'
  ,POSTING_DATE DATE NOT NULL COMMENT 'POSTING DATE OF QUARTERLY REPORT AS YYYYMMDD'
  ,REVENUE NUMBER(15,2) NOT NULL COMMENT 'REPORTED REVENUE FOR THE QUARTER'
  ,EARNINGS NUMBER(15,2) NOT NULL COMMENT 'NET EARNINGS REPORTED FOR THE QUARTER'
  ,EPS NUMBER(10,2) NOT NULL COMMENT 'BASIC EARNINGS PER SHARE FOR THE QUARTER'
  ,DILUTED_EPS NUMBER(10,2) NOT NULL COMMENT 'DILUTED EARNINGS PER SHARE FOR THE QUARTER'
  ,MARGIN NUMBER(10,2) NOT NULL COMMENT 'PROFIT DIVIDED BY REVENUES FOR THE QUARTER'
  ,INVENTORY NUMBER(15,2) NOT NULL COMMENT 'VALUE OF INVENTORY ON HAND AT END OF QUARTER'
  ,ASSETS NUMBER(15,2) NOT NULL COMMENT 'VALUE OF TOTAL ASSETS AT THE END OF QUARTER'
  ,LIABILITIES NUMBER(15,2) NOT NULL COMMENT 'VALUE OF TOTAL LIABILITIES AT THE END OF QUARTER'
  ,SH_OUT NUMBER(13,0) NOT NULL COMMENT 'AVERAGE NUMBER OF SHARES OUTSTANDING'
  ,DILUTED_SH_OUT NUMBER(13,0) NOT NULL COMMENT 'AVERAGE NUMBER OF SHARES OUTSTANDING (DILUTED)'
  ,CO_NAME_OR_CIK VARCHAR(60) NOT NULL COMMENT 'COMPANY CIK NUMBER (IF ONLY DIGITS, 10 VARCHARS) OR NAME (IF NOT ONLY DIGITS, 60 VARCHARS)'
  ,LAST_UPDATED_TS TIMESTAMP_LTZ NOT NULL COMMENT 'LAST TIME THIS RECORD WAS INSERTED OR UPDATED'
)
;

CREATE OR REPLACE TABLE TPCDI_ODS.PUBLIC.FINWIRE_SEC_ODS
(
  PTS TIMESTAMP_NTZ NOT NULL COMMENT 'POSTING DATE & TIME AS YYYYMMDD-HHMMSS'
  ,REC_TYPE VARCHAR(3) NOT NULL COMMENT '“SEC”'
  ,SYMBOL VARCHAR(15) NOT NULL COMMENT 'SECURITY SYMBOL'
  ,ISSUE_TYPE VARCHAR(6) NOT NULL COMMENT 'ISSUE TYPE'
  ,STATUS VARCHAR(4) NOT NULL COMMENT 'ACTV FOR ACTIVE SECURITY, INAC FOR INACTIVE'
  ,NAME VARCHAR(70) NOT NULL COMMENT 'SECURITY NAME'
  ,EX_ID VARCHAR(6) NOT NULL COMMENT 'ID OF THE EXCHANGE THE SECURITY IS TRADED ON'
  ,SH_OUT NUMBER(13,0) NOT NULL COMMENT 'NUMBER OF SHARES OUTSTANDING'
  ,FIRST_TRADE_DATE DATE NOT NULL COMMENT 'DATE OF FIRST TRADE AS YYYYMMDD'
  ,FIRST_TRADE_EXCHG DATE NOT NULL COMMENT 'DATE OF FIRST TRADE ON EXCHANGE AS YYYYMMDD'
  ,DIVIDEND NUMBER(10,2) NOT NULL COMMENT 'DIVIDEND AS VALUE_T'
  ,CO_NAME_OR_CIK VARCHAR(60) NOT NULL COMMENT 'COMPANY CIK NUMBER (IF ONLY DIGITS, 10 CHARS) OR NAME (IF NOT ONLY DIGITS, 60 CHARS)'
  ,LAST_UPDATED_TS TIMESTAMP_LTZ NOT NULL COMMENT 'LAST TIME THIS RECORD WAS INSERTED OR UPDATED'
)
;

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.FINWIRE_STG
(
  PTS VARCHAR(15) NOT NULL COMMENT 'POSTING DATE & TIME AS YYYYMMDD-HHMMSS - FIN, CMP, SEC',
  REC_TYPE VARCHAR(3) NOT NULL COMMENT '“FIN”, "CMP", OR "SEC" - FIN, CMP, SEC',
  COMPANY_NAME VARCHAR(60) NOT NULL COMMENT 'NAME OF THE COMPANY - CMP',
  CIK VARCHAR(10) NOT NULL COMMENT 'COMPANY IDENTIFICATION CODE FROM SEC - CMP',
  STATUS VARCHAR(4) NOT NULL COMMENT 'ACTV FOR ACTIVE COMPANY, INAC FOR INACTIVE - CMP, SEC',
  INDUSTRY_ID VARCHAR(2) NOT NULL COMMENT 'CODE FOR INDUSTRY SEGMENT - CMP',
  SP_RATING VARCHAR(4) NOT NULL COMMENT 'S&P RATING - CMP',
  FOUNDING_DATE VARCHAR(8) COMMENT 'A DATE AS YYYYMMDD - CMP',
  ADDR_LINE1 VARCHAR(80) NOT NULL COMMENT 'MAILING ADDRESS - CMP',
  ADDR_LINE2 VARCHAR(80) COMMENT 'MAILING ADDRESS - CMP',
  POSTAL_CODE VARCHAR(12) NOT NULL COMMENT 'MAILING ADDRESS - CMP',
  CITY VARCHAR(25) NOT NULL COMMENT 'MAILING ADDRESS - CMP',
  STATE_PROVINCE VARCHAR(20) NOT NULL COMMENT 'MAILING ADDRESS - CMP',
  COUNTRY VARCHAR(24) COMMENT 'MAILING ADDRESS - CMP',
  CEO_NAME VARCHAR(46) NOT NULL COMMENT 'NAME OF COMPANY CEO - CMP',
  DESCRIPTION VARCHAR(150) NOT NULL COMMENT 'DESCRIPTION OF THE COMPANY - CMP',
  YEAR VARCHAR(4) NOT NULL COMMENT 'YEAR OF THE QUARTER END. - FIN',
  QUARTER VARCHAR(1) NOT NULL COMMENT 'QUARTER NUMBER: VALID VALUES ARE 1, 2, 3, 4 - FIN',
  QTR_START_DATE VARCHAR(8) NOT NULL COMMENT 'START DATE OF QUARTER, AS YYYYMMDD - FIN',
  POSTING_DATE VARCHAR(8) NOT NULL COMMENT 'POSTING DATE OF QUARTERLY REPORT AS YYYYMMDD - FIN',
  REVENUE VARCHAR(17) NOT NULL COMMENT 'REPORTED REVENUE FOR THE QUARTER - FIN',
  EARNINGS VARCHAR(17) NOT NULL COMMENT 'NET EARNINGS REPORTED FOR THE QUARTER - FIN',
  EPS VARCHAR(12) NOT NULL COMMENT 'BASIC EARNINGS PER SHARE FOR THE QUARTER - FIN',
  DILUTED_EPS VARCHAR(12) NOT NULL COMMENT 'DILUTED EARNINGS PER SHARE FOR THE QUARTER - FIN',
  MARGIN VARCHAR(12) NOT NULL COMMENT 'PROFIT DIVIDED BY REVENUES FOR THE QUARTER - FIN',
  INVENTORY VARCHAR(17) NOT NULL COMMENT 'VALUE OF INVENTORY ON HAND AT END OF QUARTER - FIN',
  ASSETS VARCHAR(17) NOT NULL COMMENT 'VALUE OF TOTAL ASSETS AT THE END OF QUARTER - FIN',
  LIABILITIES VARCHAR(17) NOT NULL COMMENT 'VALUE OF TOTAL LIABILITIES AT THE END OF QUARTER - FIN',
  SH_OUT VARCHAR(13) NOT NULL COMMENT 'AVERAGE NUMBER OF SHARES OUTSTANDING - FIN, SEC',
  DILUTED_SH_OUT VARCHAR(13) NOT NULL COMMENT 'AVERAGE NUMBER OF SHARES OUTSTANDING (DILUTED) - FIN',
  CO_NAME_OR_CIK VARCHAR(60) NOT NULL COMMENT 'COMPANY CIK NUMBER (IF ONLY DIGITS, 10 VARCHARS) OR NAME (IF NOT ONLY DIGITS, 60 VARCHARS) - FIN, SEC',
  SYMBOL VARCHAR(15) NOT NULL COMMENT 'SECURITY SYMBOL - SEC',
  ISSUE_TYPE VARCHAR(6) NOT NULL COMMENT 'ISSUE TYPE - SEC',
  NAME VARCHAR(70) NOT NULL COMMENT 'SECURITY NAME - SEC',
  EX_ID VARCHAR(6) NOT NULL COMMENT 'ID OF THE EXCHANGE THE SECURITY IS TRADED ON - SEC',
  FIRST_TRADE_DATE VARCHAR(8) NOT NULL COMMENT 'DATE OF FIRST TRADE AS YYYYMMDD - SEC',
  FIRST_TRADE_EXCHG VARCHAR(8) NOT NULL COMMENT 'DATE OF FIRST TRADE ON EXCHANGE AS YYYYMMDD - SEC',
  DIVIDEND VARCHAR(12) NOT NULL COMMENT 'DIVIDEND AS VALUE_T - SEC'
)
;

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.HOLDINGHISTORY_STG
(
  CDC_FLAG CHAR(1) COMMENT 'I DENOTES INSERT'
 ,CDC_DSN INT COMMENT 'DATABASE SEQUENCE NUMBER'
 ,HH_H_T_ID NUMBER(15) NOT NULL COMMENT 'TRADE IDENTIFIER OF THE TRADE THAT ORIGINALLY CREATED THE HOLDING ROW.'
 ,HH_T_ID NUMBER(15) NOT NULL COMMENT 'TRADE IDENTIFIER OF THE CURRENT TRADE'
 ,HH_BEFORE_QTY NUMBER(6) NOT NULL COMMENT 'QUANTITY OF THIS SECURITY HELD BEFORE THE MODIFYING TRADE.'
 ,HH_AFTER_QTY NUMBER(6) NOT NULL COMMENT 'QUANTITY OF THIS SECURITY HELD AFTER THE MODIFYING TRADE.'
)
;

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.HR_STG
(
  EMPLOYEEID NUMBER(11) NOT NULL COMMENT 'ID OF EMPLOYEE'
 ,MANAGERID NUMBER(11) NOT NULL COMMENT 'ID OF EMPLOYEE''S MANAGER'
 ,EMPLOYEEFIRSTNAME CHAR(30) NOT NULL COMMENT 'FIRST NAME'
 ,EMPLOYEELASTNAME CHAR(30) NOT NULL COMMENT 'LAST NAME'
 ,EMPLOYEEMI CHAR(1) COMMENT 'MIDDLE INITIAL'
 ,EMPLOYEEJOBCODE NUMBER(3) COMMENT 'NUMERIC JOB CODE'
 ,EMPLOYEEBRANCH CHAR(30) COMMENT 'FACILITY IN WHICH EMPLOYEE HAS OFFICE'
 ,EMPLOYEEOFFICE CHAR(10) COMMENT 'OFFICE NUMBER OR DESCRIPTION'
 ,EMPLOYEEPHONE CHAR(14) COMMENT 'EMPLOYEE PHONE NUMBER'
)
;

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.INDUSTRY_STG
(
  IN_ID CHAR(2) NOT NULL COMMENT 'INDUSTRY CODE'
 ,IN_NAME CHAR(50) NOT NULL COMMENT 'INDUSTRY DESCRIPTION'
 ,IN_SC_ID CHAR(4) NOT NULL COMMENT 'SECTOR IDENTIFIER'
)
;

CREATE OR REPLACE TABLE TPCDI_WH.PUBLIC.LOAD_SNAPSHOT
(
	  DATABASE VARCHAR NOT NULL COMMENT 'DATABASE NAME'
	, SNAPSHOT_TIME TIMESTAMP_LTZ NOT NULL COMMENT 'THE TIMESTAMP THE SNAPSHOT WAS TAKEN'
	, ROW_COUNT NUMBER NOT NULL COMMENT 'THE SUM OF ROWS IN ALL TABLES IN THE CORRESPONDING DATABASE'
)
;

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.PROSPECT_STG
(
  AGENCYID CHAR(30) NOT NULL COMMENT 'UNIQUE IDENTIFIER FROM AGENCY'
 ,LASTNAME CHAR(30) NOT NULL COMMENT 'LAST NAME'
 ,FIRSTNAME CHAR(30) NOT NULL COMMENT 'FIRST NAME'
 ,MIDDLEINITIAL CHAR(1) COMMENT 'MIDDLE INITIAL'
 ,GENDER CHAR(1) COMMENT '''M'' OR ''F'' OR ''U'''
 ,ADDRESSLINE1 CHAR(80) COMMENT 'POSTAL ADDRESS'
 ,ADDRESSLINE2 CHAR(80) COMMENT 'POSTAL ADDRESS'
 ,POSTALCODE CHAR(12) COMMENT 'POSTAL CODE'
 ,CITY CHAR(25) NOT NULL COMMENT 'CITY'
 ,STATE CHAR(20) NOT NULL COMMENT 'STATE OR PROVINCE'
 ,COUNTRY CHAR(24) COMMENT 'POSTAL COUNTRY'
 ,PHONE CHAR(30) COMMENT 'TELEPHONE NUMBER'
 ,INCOME NUMBER(9) COMMENT 'ANNUAL INCOME'
 ,NUMBERCARS NUMBER(2) COMMENT 'CARS OWNED'
 ,NUMBERCHILDREN NUMBER(2) COMMENT 'DEPENDENT CHILDREN'
 ,MARITALSTATUS CHAR(1) COMMENT '''S'' OR ''M'' OR ''D'' OR ''W'' OR ''U'''
 ,AGE NUMBER(3) COMMENT 'CURRENT AGE'
 ,CREDITRATING NUMBER(4) COMMENT 'NUMERIC RATING'
 ,OWNORRENTFLAG CHAR(1) COMMENT '''O'' OR ''R'' OR ''U'''
 ,EMPLOYER CHAR(30) COMMENT 'NAME OF EMPLOYER'
 ,NUMBERCREDITCARDS NUMBER(2) COMMENT 'CREDIT CARDS'
 ,NETWORTH NUMBER(12) COMMENT 'ESTIMATED TOTAL NET WORTH'
)
;

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.STATUSTYPE_STG
(
  ST_ID CHAR(4) NOT NULL COMMENT 'STATUS CODE'
 ,ST_NAME CHAR(10) NOT NULL COMMENT 'STATUS DESCRIPTION'
)
;

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.TAXRATE_STG
(
  TX_ID CHAR(4) NOT NULL COMMENT 'TAX RATE CODE'
 ,TX_NAME CHAR(50) NOT NULL COMMENT 'TAX RATE DESCRIPTION'
, TX_RATE NUMBER(6,5) NOT NULL COMMENT 'TAX RATE'
)
;

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.TIME_STG
(
  SK_TIMEID INT NOT NULL COMMENT 'SURROGATE KEY FOR THE TIME'
 ,TIMEVALUE CHAR(20) NOT NULL COMMENT 'THE TIME AS TEXT, E.G. “01:23:45”'
 ,HOURID NUMBER(2) NOT NULL COMMENT 'HOUR NUMBER AS A NUMBER, E.G. 01'
 ,HOURDESC CHAR(20) NOT NULL COMMENT 'HOUR NUMBER AS TEXT, E.G. “01”'
 ,MINUTEID NUMBER(2) NOT NULL COMMENT 'MINUTE AS A NUMBER, E.G. 23'
 ,MINUTEDESC CHAR(20) NOT NULL COMMENT 'MINUTE AS TEXT, E.G. “01:23”'
 ,SECONDID NUMBER(2) NOT NULL COMMENT 'SECOND AS A NUMBER, E.G. 45'
 ,SECONDDESC CHAR(20) NOT NULL COMMENT 'SECOND AS TEXT, E.G. “01:23:45”'
 ,MARKETHOURSFLAG BOOLEAN COMMENT 'INDICATES A TIME DURING MARKET HOURS'
 ,OFFICEHOURSFLAG BOOLEAN COMMENT 'INDICATES A TIME DURING OFFICE HOURS'
)
;

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.TRADEHISTORY_STG
(
  TH_T_ID NUMBER(15) NOT NULL COMMENT 'TRADE IDENTIFIER. CORRESPONDS TO T_ID IN THE TRADE.TXT FILE'
 ,TH_DTS DATETIME NOT NULL COMMENT 'WHEN THE TRADE HISTORY WAS UPDATED.'
 ,TH_ST_ID CHAR(4) NOT NULL COMMENT 'STATUS TYPE IDENTIFIER.'
)
;

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.TRADETYPE_STG
(
TT_ID CHAR(3) NOT NULL COMMENT 'TRADE TYPE CODE'
,TT_NAME CHAR(12) NOT NULL COMMENT 'TRADE TYPE DESCRIPTION'
,TT_IS_SELL INT NOT NULL COMMENT 'FLAG INDICATING A SALE'
,TT_IS_MRKT INT NOT NULL COMMENT 'FLAG INDICATING A MARKET ORDER'
)
;

CREATE OR REPLACE TABLE TPCDI_ODS.PUBLIC.TRADE_ODS
(
   T_ID NUMBER(15) NOT NULL COMMENT 'TRADE IDENTIFIER.'
 , T_DTS DATETIME NOT NULL COMMENT 'DATE AND TIME OF TRADE.'
 , T_DT DATE NOT NULL COMMENT 'DATE OF TRADE.'
 , T_ST_ID CHAR(4) NOT NULL COMMENT 'STATUS TYPE IDENTIFIER'
 , T_TT_ID CHAR(3) NOT NULL COMMENT 'TRADE TYPE IDENTIFIER'
 , T_IS_CASH INT COMMENT 'IS THIS TRADE A CASH (1) OR MARGIN (0) TRADE?'
 , T_S_SYMB CHAR(15) NOT NULL COMMENT 'SECURITY SYMBOL OF THE SECURITY'
 , T_QTY NUMBER(6) COMMENT 'QUANTITY OF SECURITIES TRADED.'
 , T_BID_PRICE NUMBER(8,2) COMMENT 'THE REQUESTED UNIT PRICE.'
 , T_CA_ID NUMBER(11) NOT NULL COMMENT 'CUSTOMER ACCOUNT IDENTIFIER.'
 , T_EXEC_NAME CHAR(49) NOT NULL COMMENT 'NAME OF THE PERSON EXECUTING THE TRADE.'
 , T_TRADE_PRICE NUMBER(8,2) COMMENT 'UNIT PRICE AT WHICH THE SECURITY WAS TRADED.'
 , T_CHRG NUMBER(10,2) COMMENT 'FEE CHARGED FOR PLACING THIS TRADE REQUEST.'
 , T_COMM NUMBER(10,2) COMMENT 'COMMISSION EARNED ON THIS TRADE'
 , T_TAX NUMBER(10,2) COMMENT 'AMOUNT OF TAX DUE ON THIS TRADE'
 , LAST_UPDATED_TS TIMESTAMP_LTZ NOT NULL COMMENT 'LAST TIME THIS RECORD WAS INSERTED OR UPDATED'
)
;

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.TRADE_STG
(
  CDC_FLAG CHAR(1) COMMENT 'I, U DENOTES INSERT, UPDATE'
 ,CDC_DSN NUMBER(12) COMMENT 'DATABASE SEQUENCE NUMBER'
 ,T_ID NUMBER(15) NOT NULL COMMENT 'TRADE IDENTIFIER.'
 ,T_DTS DATETIME NOT NULL COMMENT 'DATE AND TIME OF TRADE.'
 ,T_ST_ID CHAR(4) NOT NULL COMMENT 'STATUS TYPE IDENTIFIER'
 ,T_TT_ID CHAR(3) NOT NULL COMMENT 'TRADE TYPE IDENTIFIER'
 ,T_IS_CASH INT COMMENT 'IS THIS TRADE A CASH (1) OR MARGIN (0) TRADE?'
 ,T_S_SYMB CHAR(15) NOT NULL COMMENT 'SECURITY SYMBOL OF THE SECURITY'
 ,T_QTY NUMBER(6) COMMENT 'QUANTITY OF SECURITIES TRADED.'
 ,T_BID_PRICE NUMBER(8,2) COMMENT 'THE REQUESTED UNIT PRICE.'
 ,T_CA_ID NUMBER(11) NOT NULL COMMENT 'CUSTOMER ACCOUNT IDENTIFIER.'
 ,T_EXEC_NAME CHAR(49) NOT NULL COMMENT 'NAME OF THE PERSON EXECUTING THE TRADE.'
 ,T_TRADE_PRICE NUMBER(8,2) COMMENT 'UNIT PRICE AT WHICH THE SECURITY WAS TRADED.'
 ,T_CHRG NUMBER(10,2) COMMENT 'FEE CHARGED FOR PLACING THIS TRADE REQUEST.'
 ,T_COMM NUMBER(10,2) COMMENT 'COMMISSION EARNED ON THIS TRADE'
 ,T_TAX NUMBER(10,2) COMMENT 'AMOUNT OF TAX DUE ON THIS TRADE'
)
;

CREATE OR REPLACE TABLE TPCDI_STG.PUBLIC.WATCH_HISTORY_STG
(
 CDC_FLAG CHAR(1) COMMENT 'I, U DENOTES INSERT, UPDATE'
 ,CDC_DSN NUMBER(12) COMMENT 'DATABASE SEQUENCE NUMBER'
 ,W_C_ID NUMBER(11) NOT NULL COMMENT 'CUSTOMER IDENTIFIER'
 ,W_S_SYMB CHAR(15) NOT NULL COMMENT 'SYMBOL OF THE SECURITY TO WATCH'
 ,W_DTS DATETIME NOT NULL COMMENT 'DATE AND TIME STAMP FOR THE ACTION'
 ,W_ACTION CHAR(4) COMMENT 'WHETHER ACTIVATING OR CANCELING THE WATCH'
)
;
